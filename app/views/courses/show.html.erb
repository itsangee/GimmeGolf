
<h1 class="text-center">
  <%= @course.name%>
</h1>

<% current_year = Date.current.year %>

<%# ========== PLEASE LEAVE THIS CODE ALONE AND DO YOUR CODE ABOVE IT ===================================== %>
<%# data-controller="show-attendees" %>
<%# data-action="click->show-attendees#revealAttendees" %>
<%# class="d-none" data-show-attendees-target="attendees" %>


<div>
  <div class="text-center">
    <h2><%= @today %></h2>
    <h2>Current attendees:</h2>
  </div>
  <div class="d-flex justify-content-center">
    <% @slots.each do |slot| %>
      <div>
        <button class="text-center">
          <%= slot.start_time.strftime("%I:%M %p") %>
        </button>
        <div class="border border-3">
          <% @attendee_bookings.each do |attendee| %>
            <% if slot.start_time == attendee.game_start %>
              <p ><%= attendee.user.email %> </p>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>


<div>
  <%= simple_form_for [@course, @booking] do |f| %>
    <%= f.input :game_start, collection: @course.slots_collection, required: true %>
    <%# <%= f.select :slot_id, @slots.map { |slot| ["Start time #{slot.start_time.strftime("at %I:%M %p")}", slot.id]} %>
    <%= f.input :date, as: :date, html5: true, required: true %>
    <%= f.submit "Book Slot", class: "button", id: "buy-btn" %>
  <% end %>
</div>


<p>User signed in? <%= user_signed_in? %></p>
<p>Current user: <%= current_user.email %> </p>
