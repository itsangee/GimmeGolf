<div class="container">
  <div class="row">


    <div class="py-2">
      <%= form_with url: courses_path, method: :get, class: "d-flex" do %>
      <%= date_field_tag :query,
        params[:query],
        class: "form-control",
        placeholder: "Find a course"
      %>
      <%= submit_tag "Search", class: "btn btn-primary" %>
      <% end %>
    </div>

    <%= link_to "Display all",  courses_path %>

    <% if params[:search].present? %>
      <% @courses.each do |course| %>
        <%= link_to course.name, course_path(course) %>
      <% end %>
    <% else %>
      <% @courses.each do |course| %>
        <%= link_to course.name, course_path(course)%>
      <% end %>
    <% end %>

    <div class="cards course-description ">
      <% @courses.each do |course| %>
      <div class="course-card scale" >

      <a href="#"><%= link_to course_path(course, selected_date: params[:query]) do %>
      <%= cl_image_tag course.photos[0].key, height: 300,  crop: :fill %>
         <div class="card-course-info">
          <%course_city = course.location.split(",")[-2] %>
          <%course_zip = course.location.split(",")[-1] %>
              <h4 class="course-name"><%= course.name.upcase %></h4>
              <div >
                <div class="location">
                  <p class="course-info location"><%= "#{course_city.upcase}, #{course_zip.upcase}"%></p>
                </div>
                <div class="display-flex card-text">
                  <div class="justify-index-content">
                    <p class="course-info item "><i class="fa-solid fa-golf-ball-tee"></i> PAR <%= course.par %></p>
                    <p class="course-info item hole"><i class="fa-solid fa-ring"></i> HOLE <%= course.holes %></p>
                  </div>
                  <div class="price">
                    <h2 class="card-golf-pricing">£<%= course.price %></h2>
                  </div>
                </div>
              </div>
          </div>
      <% end %></a>
      </div>
      <% end %>

    </div>
  </div>
</div>
